<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>org.purefn.sqlium documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Sqlium</span> <span class="project-version">0.1.3-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>org</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>purefn</span></div></div></li><li class="depth-3 current"><a href="org.purefn.sqlium.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sqlium</span></div></a></li><li class="depth-4"><a href="org.purefn.sqlium.import.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>import</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="org.purefn.sqlium.html#var-entity"><div class="inner"><span>entity</span></div></a></li><li class="depth-1"><a href="org.purefn.sqlium.html#var-record-id"><div class="inner"><span>record-id</span></div></a></li><li class="depth-1"><a href="org.purefn.sqlium.html#var-records"><div class="inner"><span>records</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">org.purefn.sqlium</h1><div class="doc"><pre class="plaintext">A flexible, config-driven, Datomic-inspired entity extraction
system. sqlium provides a declarative DSL to describe entities
stored in a relational database - particularly those that are
composed of many tables with nested relationships - and mechanisms
to read and transform them into Clojure datastructures.</pre></div><div class="public anchor" id="var-entity"><h3>entity</h3><div class="usage"><code>(entity db spec id)</code></div><div class="doc"><pre class="plaintext">Returns a single entity by id for given spec, querying from jdbc
datasource db.</pre></div></div><div class="public anchor" id="var-record-id"><h3>record-id</h3><div class="usage"><code>(record-id record)</code></div><div class="doc"><pre class="plaintext">Returns the id of a record.
</pre></div></div><div class="public anchor" id="var-records"><h3>records</h3><div class="usage"><code>(records db spec &amp; options)</code></div><div class="doc"><pre class="plaintext">Returns a lazy sequence of records for spec, querying from jdbc
datasource db. Takes optional parameters as kwargs or a map to
either control expiry, return updated data since a given date by
comparing against provided date time fields, or return updated data
based on a specific update table. Only the highest-precedence
option present will be used. In order of precedence:

:update - a map with:
  * :table    string name of the update table
  * :id       string name of the column containing entity ids to update
  * :updated  string name of the field containing the entity update time
  * :date     anything that can be coerced to a DateTime; the records
              returned will be newer than this date

:delta - a map with:
  * :fields   collection of :table/column datetime fields which will
              be compared with :date to detect updated data
  * :date     anything that can be coerced to a DateTime; the records
              returned will be newer than this date

:expiry - a map with:
  * :field    :table/column keyword for the datetime field that
              determines the age of the entity
  * :age      maximum age before the entity is ignored, either as an
              integer number of days or an expiration date as something
              that can be coerced to a DateTime</pre></div></div></div></body></html>